<!DOCTYPE html>
<html>
<head>
  <title>WIMP3</title>
</head>
<body>
  <h1>WIMP3 Converter</h1>
  <input type="file" id="fileInput" accept="video/*">
  <button id="convertBtn">Convert</button>
  <div id="result"></div>

  <script>
    const API = 'http://localhost:3000';

    document.getElementById('convertBtn').onclick = async () => {
      const file = document.getElementById('fileInput').files[0];
      if (!file) return alert('Select a file');

      const formData = new FormData();
      formData.append('video', file);

      const res = await fetch(`${API}/convert`, {
        method: 'POST',
        body: formData
      });

      const data = await res.json();
      
      if (data.success) {
        document.getElementById('result').innerHTML = `
          <a href="${API}${data.downloadUrl}" download>
            Download MP3 (${(data.size / 1024 / 1024).toFixed(2)} MB)
          </a>
        `;
      }
    };
  </script>
</body>
</html>